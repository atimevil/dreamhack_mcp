# smithery.yaml
# This file tells Smithery.ai how to build and run your agent.

build:
  # Use the Dockerfile in the root of the repository
  dockerfile: Dockerfile

startCommand:
  type: http
  configSchema:
    type: object
    properties: {}
    required: []

run:
  # Command to run the agent.
  command: ["python", "-u", "server.py"]  # -u flag for unbuffered output

  # Ports to expose from the container.
  ports:
    - "8000:8000"

  # Environment variables to set for the running agent.
  environment:
    PYTHONUNBUFFERED: "1"  # Ensure Python output is not buffered
    PYTHONDONTWRITEBYTECODE: "1"  # Don't write .pyc files

  # Health check configuration
  healthCheck:
    type: http
    path: "/mcp/health"  # Health check endpoint
    interval: 30  # Check every 30 seconds
    timeout: 30   # Timeout after 30 seconds
    retries: 5    # Retry 5 times before marking unhealthy
    initialDelay: 10  # Wait 10 seconds before starting health checks 
